<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABqUlEQVRIS+2W7U0CQRCG31lNENSoHWAH2gF0gB1AB1IBUAF2IB1IB9KB14FYgSQqhBh3nDkOsreckluP8EMuIYQbdp6dr3eXsKOHdsRFJvgNqB0AVwycF7Cx6BgY+n7WwDNj7pm5WQDQdTGqMNfdFynwDKgy0XPB0NgdMV+WgfHSdwocp5jocRvgL4n4FBjtwXEG9ql2miyyzK1P6coS0ARR37FNwNybA4NDmX1pzo7Yan6DhjTXZC6jcAFMls6mxvQFdruYE7qrWNte2l5FdEqLkUyJTwg4kuG/diP4ABpE9KDvRGxufGWaLkYyFXUIeC1iAXcFrClVcE/AXS/iJ/lddTcbAtb1I6lxW2uc1FGjXaVS638iNVblgzGdLMkNBf9ZzPbgf35IJMMvX8U/v57HipPh11FpFImWmR+UrW25PjPvXO+ix2JICQAZc7aSyR92pQBr7YtrlnvbWOZ/6EpurLR5IktptL/Q0+xNfnOB1VnWZTArlYWDkz5wD4FITq+6n8qtgJPujy+FIdDcNXajUPiRfNwr66YoN3Z1Hgeh/83dXKEgf903PeLkHzwGWCEAAAAASUVORK5CYII=">
    
    <title>chat</title>
    <style>
                *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html{
            display: flex;
            align-items: center;
            justify-content: center;
        }


        body{
            font-family: 'Roboto', sans-serif;
            background-color: #696969;
            height: 100vh;
            width: 99%;
            display: flex;
            flex-direction: row;
            gap: .1rem;
            align-items: center;
            justify-content: center;
        }
        .Contactos{
            width:45%;
            height: 99%;
            border-radius: 1rem 0 0 1rem;
            background-color: #adadad;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: .6rem;
            gap: .6rem;
        }
        .Contactos .Contactos_user{
            display: flex;
            align-items: center;
            gap: .5rem;
            padding: .5rem;
            border-radius: 1rem;
            cursor: pointer;
            background-color: #dadada;
            .Contactos_user-perfil{
                width: 3rem;
                height: 3rem;
                border-radius: 50%;
                background-color: blueviolet;
            }
        }
        .Contactos .Contactos_users{
            position: relative;
            display: flex;
            width: 100%;
            height: 100%;
            flex-direction: column;
            gap: .5rem;
            border-radius: 1rem;
            background-color: #dadada;
            padding: .5rem;
            overflow-x: scroll;
            .Contactos_users-user{
                display: flex;
                align-items: center;
                width: 100%;
                min-height: 3rem;
                height: 3.2rem;
                gap: .5rem;
                background-color: #8b8b8b;
                border-radius: 1rem;
                padding: .5rem;
                cursor: pointer;
                figure{
                    width: 2.6rem;
                    height: 2.6rem;
                    border-radius: 50%;
                    background-color: blueviolet;
                }
            }
            .Contactos_users-search{
                position: absolute;
                margin: 0 auto;
                bottom: .5rem;
                width: 95%;
                height: 35%;
                min-height: 11.5625rem;
                gap: .5rem;
                background-color: #2b1e1e;
                border-radius: 1rem;
                padding: .5rem;
                display: flex;
                flex-direction: column;
                .form-search{
                    display: flex;
                    width: 100%;
                    height: 20%;
                    gap:  .3rem;
                    input{
                        width: 80%;
                        min-height: 2rem;
                        height: 100%;
                        padding: .5rem;
                        border: none;
                        border-radius: .5rem;
                       outline: none;
                    }
                    button{
                        width: 20%;
                        height: 100%;
                        background-color: #f5f5f5;
                        border: none;
                        border-radius: .5rem;
                        cursor: pointer;
                    }
                }
                .Contactos_users-searcheados{
                    width: 100%;
                    height: 100%;
                    background-color: aqua;
                    display: flex;
                    gap: .5rem;
                    padding: .5rem;
                    border-radius: .6rem;
                    background-color: #8b8b8b;
                    scroll-behavior: smooth;
                    overflow: scroll;
                    .Contactos_users-searcheadoss{
                        width: 100%;
                        height: 2.5rem;
                        display: flex;
                        align-items: center;
                        background-color: beige;
                        border-radius: .5rem;
                        cursor: pointer;
                        padding: .3rem;
                        gap: .3rem;
                        figure{
                            width: 2rem;
                            height: 2rem;
                            border-radius: 50%;
                            background-color: blueviolet;
                        }

                    }
                }
               
            }
            
        }


        .Messajes{
            position: relative;
            bottom: 0;
            margin: .6rem 0 .6rem 0;
            width: 65%;
            height: 99%;
            border-radius: 0 1rem 1rem 0;
            background-color: #adadad;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: .6rem;  
        }
        li { padding: 0.5rem 1rem; }
        li:nth-child(odd) { background: #efefef; }
        #mensajes{
                list-style: none;
                
        }
        .Form__messajes{
            display: flex;
            width: 100%;
            height: 2rem;
            justify-content: space-between;
            gap: .3rem;
        }
        .Form__messajes input{
            width: 80%;
            height: 100%;
            padding: .5rem;
            border: none;
            border-radius: 5px;
            outline: none;
        }
        .Form__messajes button{
            width: 20%;
            height: 100%;
            background-color: #f5f5f5;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            outline: none;
        }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js" integrity="sha512-11t8Q+vY9JlCrr+PveZKTYJq8n7O09Y5X/pk/aMd3vJugSvu4xOunGEUzaADqL3I8cZKE/pBwwCfXzDkRJh2sQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module" defer >
       /*
       const socket = io()
        const form = document.querySelector('form')
        const input = document.querySelector('input')
        const mensajes = document.querySelector('ul');
        socket.on('chat message', (msg) => {
            const item = document.createElement('li')
            item.textContent = msg
            mensajes.appendChild(item)
        })
        
        
        form.addEventListener('submit', (e) => {
            e.preventDefault()
            if(input.value){
                socket.emit('chat message', input.value)
                input.value = ''
                

            }
        })

        */
        const IO = io();

        const formulario = document.querySelector('.Form__messajes');
        const input = document.querySelector('#input');
        const mensajes = document.querySelector('#mensajes');

        formulario.addEventListener('submit',(e)=>{
            e.preventDefault();
            if(input.value){
                IO.emit('chat message', input.value)
                input.value = '';

            }else{
                console.log('no hay mensaje')
            }

        });
        IO.on('chat message', (msg)=>{
            const limsg = document.createElement('li');
            limsg.textContent = msg;
            mensajes.appendChild(limsg);
            console.log('mensaje recibido', msg)

        })
    </script>
</head>
<body>
    <section class="Contactos">
        <div class="Contactos_user">
            <figure class="Contactos_user-perfil">
                <img src="" />
            </figure>
            <h3>Killua</h3>
        </div>
        <div class="Contactos_users"> 

            <div class="Contactos_users-user"> 
                <figure class="Contactos_user-perfil">
                    <img src="" alt="">
                </figure>
                <h3>Piti</h3>
            </div>

            <div class="Contactos_users-search"> 
                <form class="form-search" >
                    <input type="text" placeholder="search">
                    <button>search</button>
                </form>
                <div class="Contactos_users-searcheados">
                    <div class="Contactos_users-searcheadoss">
                        <figure class="Contactos_user-perfil">
                            <img src="" alt="">
                        </figure>
                        <h3>Piti</h3> 
                    </div>

                </div>
 
            </div>

    </section>

    <section class="Messajes">
        <ul id="mensajes"></ul>

        <form class="Form__messajes">
            <input  id="input">
            <button id="bton">send</button>
        </form>    
    </section>
</body>
</html> 